{
  "_args": [
    [
      "https://github.com/techquest/cordova-payment-plugin.git",
      "/Users/gabrielizebhigie/Desktop/cordova-payment-plugin-samples"
    ]
  ],
  "_from": "git+https://github.com/techquest/cordova-payment-plugin.git",
  "_id": "PaymentPlugin@0.0.1",
  "_inCache": true,
  "_installable": true,
  "_location": "/PaymentPlugin",
  "_phantomChildren": {},
  "_requested": {
    "hosted": {
      "directUrl": "https://raw.githubusercontent.com/techquest/cordova-payment-plugin/master/package.json",
      "gitUrl": "git://github.com/techquest/cordova-payment-plugin.git",
      "httpsUrl": "git+https://github.com/techquest/cordova-payment-plugin.git",
      "shortcut": "github:techquest/cordova-payment-plugin",
      "ssh": "git@github.com:techquest/cordova-payment-plugin.git",
      "sshUrl": "git+ssh://git@github.com/techquest/cordova-payment-plugin.git",
      "type": "github"
    },
    "name": null,
    "raw": "https://github.com/techquest/cordova-payment-plugin.git",
    "rawSpec": "https://github.com/techquest/cordova-payment-plugin.git",
    "scope": null,
    "spec": "git+https://github.com/techquest/cordova-payment-plugin.git",
    "type": "hosted"
  },
  "_requiredBy": [
    "/"
  ],
  "_resolved": "git+https://github.com/techquest/cordova-payment-plugin.git#e36f580b4a36cea40424142eb23388acdc088402",
  "_shasum": "889c715b60901fbb04a20974110fc315f56dbf34",
  "_shrinkwrap": null,
  "_spec": "https://github.com/techquest/cordova-payment-plugin.git",
  "_where": "/Users/gabrielizebhigie/Desktop/cordova-payment-plugin-samples",
  "author": {
    "name": "Interswitch Limited"
  },
  "bugs": {
    "url": "https://github.com/techquest/cordova-payment-plugin/issues"
  },
  "cordova": {
    "id": "cordova-isw-payment-plugin",
    "platforms": [
      "android",
      "ios"
    ]
  },
  "dependencies": {},
  "description": "Cordova Payment Plugin Powered by Interswitch",
  "devDependencies": {
    "jshint": "^2.6.0"
  },
  "files": [
    "plugin.xml",
    "src",
    "www",
    "libs"
  ],
  "gitHead": "e36f580b4a36cea40424142eb23388acdc088402",
  "homepage": "https://github.com/techquest/cordova-payment-plugin#readme",
  "keywords": [
    "cordova",
    "ecosystem:cordova",
    "cordova-android",
    "cordova-ios",
    "interswitch",
    "payment"
  ],
  "license": "MIT",
  "name": "PaymentPlugin",
  "optionalDependencies": {},
  "readme": "# Table of Contents\n1. [Cordova Payment Plugin](#CordovaPayment)\n\n2. [First steps](#FirstSteps)\n\n3. [Install instructions for Android](#InstallationInstructionsForAndroid)\n\n4. [Install instructions for iOS](#InstallationInstructionsForIos)\n\n5. [Using The Plugin in Sandbox Mode](#SandBoxMode) \n\n6. [Using the Plugin with UI (In PCI-DSS Scope: No )](#SDKWithUI)   \n   * [Pay with Card/Wallet](#Pay)\n   * [Pay with Card](#PayWithCard)\n   * [Pay with Wallet](#PayWithWallet)\n   * [Validate Card](#ValidateCard)\n   * [Pay With Token](#PayWithToken)\n   \n7. [Using the Plugin without UI (In PCI-DSS Scope: Yes)](#SDKWithOutUI)\n   * [Pay with Card/Token](#PayWithCardToken)\n   * [Pay with Wallet](#PayWithWalletNoUI)\n   * [Validate Card and Get Token](#ValidateCardNoUI)\n   * [Authorize Transaction With OTP](#AuthorizeOTP)\n   * [Checking Payment Status](#PaymentStatus)\n  \n\n## <a name='CordovaPayment'></a> Cordova Payment Plugin\nInterswitch cordova payment plugin allows you to accept payments from customers within your cordova mobile application.\n\n**Please Note: *The current supported currency is naira (NGN), support for other currencies would be added later***\n\nThe first step to ​using the plugin is to register as a merchant. This is described [here] (merchantxuat.interswitchng.com)\n\n## <a name='FirstSteps'></a> First steps\n* Create a new cordova project. To do so refer to the documentation [here](https://cordova.apache.org/docs/en/latest/guide/cli/index.html)\n\n## <a name='InstallationInstructionsForAndroid'></a> Plugin installation instructions for Android\n* **cd** to the directory of your cordova project. \n\n* Add the cordova-payment-plugin from CLI, using this command\n\nReplace clientId and clientSecret in the command below with your clientId and clientSecret\n```terminal\ncordova plugin add https://github.com/techquest/cordova-payment-plugin.git --variable CLIENT_ID=clientId --variable CLIENT_SECRET=clientSecret\n```\n\n* Add ```android``` platform. Make sure to add the platform **after** adding the plugin.\n\n```terminal\ncordova platform add android\n```\n* **NOTE: *To use the inapp change your manifest theme to android:theme=\"@style/Theme.AppCompat.Light\"***\n\n**Please Note:** Ensure your cordova.js file is the first Javascript file to be included in your index.html\n\n\n## <a name='InstallationInstructionsForIos'></a>Plugin installation instructions for iOS\n* You'll need to have **Xcode 8.3.2** or later installed.\n\n* **cd** to the directory of your cordova project. \n\n* Add cordova payment plugin\n```\ncordova plugin add https://github.com/techquest/cordova-payment-plugin.git\n```\n\n* Add ```ios``` platform. Make sure to add the platform **after** adding the plugin.\n\n```terminal\ncordova platform add ios\n```\n\n* In ```Finder```, go to the **YourCordovaApp/platforms/ios** directory. Open the .xcodeproj file in XCode. A dialog may appear asking: Convert to latest Swift Syntax? Click the **Cancel** button.\n\n* In ```Finder```, go to the ```/platforms/ios/<NameOfApp>/Plugins/com.interswitchng.sdk.payment``` directory. You should see a **PaymentSDK.framework** file.\n\n* Drag the ​ **PaymentSDK.framework** file from ```Finder``` to XCode's **Embedded Binaries** section for your app's **TARGETS** settings.\n\n* In the dialog that appears, make sure ```Copy items if needed``` is unchecked.\n\n* **Important**: With ```XCode``` still open, click the project to view its settings. Under the **info** tab find the **Configurations** section and change all the values for ```Debug``` and ```Release``` to **None**. You can change it back once our setups are done.\n\nThe **PaymentSDK.framework** needs some [Cocoapods](https://cocoapods.org/) dependencies so we'll need to install them.\n\n* Close Xcode. **cd** into ```platforms/ios``` directory\n\n* Run: \n\n```terminal\npod init\n```\n\n* Open the **Podfile** created and replace ```#``` commented parts with the following.\n\n```terminal\nsource 'https://github.com/CocoaPods/Specs.git'\nplatform :ios, \"8.0\"\nuse_frameworks!\n```\n\n* Add the following to the **Podfile**, inside the first ```target``` block.\n\n```\npod 'CryptoSwift', '0.6.9'\npod 'Alamofire', :git => 'https://github.com/Alamofire/Alamofire.git', :tag => '4.4.0'\npod 'SwiftyJSON', :git => 'https://github.com/SwiftyJSON/SwiftyJSON.git', :tag => '3.1.4'\npod 'OpenSSL-Universal', '1.0.2.10'\n```\n\n* Now run:\n\n```terminal\npod install\n```\n\n* After the pods are installed successfully you can go to the directory ```platforms/ios``` and open the ```<NameOfApp>.xcworkspace``` file in XCode. \n\n\n### <a name='SandBoxMode'></a> Using The Plugin in Sandbox Mode\n\nDuring development of your app, you should use the Plugin in sandbox mode to enable testing. Different Client Id and Client Secret are provided for Production and Sandbox mode. The procedure to use the Plugin on sandbox mode is just as easy:\n\n* Use Sandbox Client Id and Client Secret got from the Sandbox Tab of the Developer Console after signup (usually you have to wait for 5 minutes after signup for you to see the Sandbox details) everywhere you are required to supply Client Id and Client Secret in the remainder of this documentation              \n* In your code, override the api base as follows\n\n```javascript\n    function init(){\n        var userDetails = {\n            clientId: \"IKIAF8F70479A6902D4BFF4E443EBF15D1D6CB19E232\",\n            clientSecret: \"ugsmiXPXOOvks9MR7+IFHSQSdk8ZzvwQMGvd0GJva30=\",\n            paymentApi : \"https://sandbox.interswitchng.com\",\n            passportApi : \"https://sandbox.interswitchng.com/passport\"\n        };\n        var initial = PaymentPlugin.init(userDetails);\n    }\n```\n\n* Follow the remaining steps in the documentation.\n* call the init function inside the onDeviceReady function of your cordova app\n* NOTE: When going into Production mode, use the Client Id and the Client Secret got from the Production Tab of Developer Console instead.\n\n## <a name='SDKWithUI'></a>Using the Plugin with UI (In PCI-DSS Scope: No )\n\n### <a name='Pay'></a>Pay with Card/Wallet\n\n* To allow for Payment with Card or Wallet\n* Create a Pay button\n* In the onclick event of the Pay button, use this code\n1. Set up payment request like this: \n\n```javascript\n    var payRequest = {\t\t\t\n        amount : 100, // Amount in Naira\n        customerId : 1234567890, // Optional email, mobile no, BVN etc to uniquely identify the customer.\n        currency : \"NGN\", // ISO Currency code\n        description : \"Purchase Phone\" // Description of product to purchase\n    }\n```\n\n2. Create a button to make payment and use this code in the onclick event of the button\n\n```javascript\n    var paySuccess = function(response) {\n        var purchaseResponse = JSON.parse(response); // transaction success reponse\n        alert(purchaseResponse.message); \n    }\n    var payFail = function(response) {\n        alert(response); // transaction failure reponse\n    }\n    PaymentPlugin.pay(payRequest, paySuccess, payFail);\n```\n\n### <a name='PayWithCard'></a>Pay with Card\n\n* To allow for Payment with Card only\n* Create a Pay button and set the payment request\n*Set up payment request like this: \n```javascript\n    var payWithCardRequest = {\t\t\t\n        amount : 100, // Amount in Naira\n        customerId : 1234567890, // Optional email, mobile no, BVN etc to uniquely identify the customer.\n        currency : \"NGN\", // ISO Currency code\n        description : \"Purchase Phone\" // Description of product to purchase\n    }\n```\n\n* In the onclick event of the Pay button, use this code.\n\n```javascript\n  var payWithCardSuccess = function(response) {\n    var purchaseResponse = JSON.parse(response); // transaction success reponse\n    alert(purchaseResponse.message);\n  }\n  var payWithCardFail = function(response) {\n    alert(response); // transaction failure reponse\n  }\n  PaymentPlugin.payWithCard(payWithCardRequest, payWithCardSuccess, payWithCardFail);\n```\n\n### <a name='PayWithWallet'></a>Pay With Wallet\n\n* To allow for Payment with Wallet only\n* Create a Pay button and set the payment request\n* Set up payment request like this: \n```javascript\n    var payWithWalletRequest = {\t\t\t\n        amount : 100, // Amount in Naira\n        customerId : 1234567890, // Optional email, mobile no, BVN etc to uniquely identify the customer.\n        currency : \"NGN\", // ISO Currency code\n        description : \"Purchase Phone\" // Description of product to purchase\n    }\n```\n\n* In the onclick event of the Pay button, use this code.\n\n```javascript\n    var payWithWalletSuccess = function(response) {\n        var purchaseResponse = JSON.parse(response); // transaction success reponse\n        alert(purchaseResponse.message); \n    }\n    var payWithWalletFail = function(response) {\n        alert(response); // transaction failure reponse\n    }\n    PaymentPlugin.payWithWallet(payWithWalletRequest, payWithWalletSuccess, payWithWalletFail);\n```\n\n### <a name='ValidateCard'></a>Validate Card\n\n* Validate card is used to check if a card is a valid card, it returns the card balance and token\n* Set up payment request like this: \n\n```javascript\n    var validateCardRequest = {\n        customerId : 1234567890 // Optional email, mobile no, BVN etc to uniquely identify the customer\n    }\n```\n\n* To call validate card, use this code.\n\n```javascript\n    var validatePaymentCardSuccess = function(response) {\n        var validateCardResponse = JSON.parse(resposne);\n        var token = validateCardResponse.token;\n        var tokenExpiryDate = validateCardResponse.tokenExpiryDate;\n        var balance = validateCardResponse.balance;\n        var panLast4Digits = validateCardResponse.panLast4Digits;\n        var cardType = validateCardResponse.cardType;\n        alert(\"Validating your card was successful\");\n    }\n    var validatePaymentCardFail = function(response) {\n        alert(response); // transaction failure reponse\n    }\n    PaymentPlugin.validatePaymentCard(validateCardRequest, validatePaymentCardSuccess, validatePaymentCardFail);\n```\n\n### <a name='PayWithToken'></a> Pay with Token\n\n* To allow for Payment with Token only\n* Create a Pay button\n* Set up payment request like this: \n\n```javascript\n    var payWithTokenRequest = {\n        pan : 5123459987670669364, //Token\n        amount : 100, // Amount in Naira\n        currency : \"NGN\", // ISO Currency code\t\t\n        cardtype : \"Verve\", // Card Type\t\n        expiryDate : 2004, // Card or Token expiry date in YYMM format\n        customerId : 1234567890,\t// Optional email, mobile no, BVN etc to uniquely identify the customer.\t\n        panLast4Digits : 7499,\t\t//Last 4digit of the pan card\n        description : \"Pay for gown\"\n    }\n```\n\n* In the onclick event of the Pay button, use this code.\n\n```javascript\n      var payWithTokenSuccess = function(response) {\n        var purchaseResponse = JSON.parse(response); // transaction success reponse\n        alert(purchaseResponse.message);\n      }\n      var payWithTokenFail = function(response) {\n        alert(response); // transaction failure reponse\n      }    \n      PaymentPlugin.payWithToken(payWithTokenRequest, payWithTokenSuccess, payWithTokenFail);    \n```\n\n## <a name='SDKWithOutUI'></a>Using the Plugin without UI (In PCI-DSS Scope: Yes)\n\n### <a name='PayWithCardToken'></a>Pay with Card/Token\n\n* To allow for Payment with Card or Token\n* Create a UI to collect amount and card details\n* Create a Pay button\n* Set up payment request like this:\n\n```javascript\n    var purchaseRequest = {\n        pan:5060990580000217499,  //Card No or Token\n        amount : 100, // Amount in Naira\n        cvv : 111, // Card CVV\n        pin : 1111, // Optional Card PIN for card payment\n        currency : \"NGN\", // ISO Currency code\n        expiryDate : 2004, // Card or Token expiry date in YYMM format\n        customerId : 1234567890 // Optional email, mobile no, BVN etc to uniquely identify the customer.\n    }\n```\n\n\n```javascript\n    var makePaymentSuccess = function(response) {\n        var responseObject ={};\n        if(response.responseCode !== undefined){\n          responseObject = response;\n        }else if (response.responseCode === undefined){\n          responseObject = JSON.parse(response);\n        }\n        if(responseObject.responseCode) {\n          if (responseObject.responseCode === \"T0\") {\n            ons.notification.prompt(responseObject.message).then(\n            function(otp) {\n              responseObject.method = \"makePayment\";\n              responseObject.otpValue = otp;\n              authorizePurchase(responseObject);\n            }\n          );\n          } \n        }\n        else { \n          if(responseObject.detailMessage !== undefined && responseObject.detailMessage !== null ){\n            alert(responseObject.detailMessage);  \n          }else{\n            alert(responseObject);\n          }\n        }       \n        //var responseObject = JSON.parse(response);\n        //the response object here contains amount, message, transactionIdentifier and transactionRef        \n        alert(responseObject.message);\n    }\n    var makePaymentFail = function(response) {\n        alert(response);\n    }    \n    PaymentPlugin.makePayment(purchaseRequest, makePaymentSuccess, makePaymentFail);\n```\n\n### <a name='PayWithWalletNoUI'></a>Pay with Wallet\n* To allow for Payment with Wallet only\n* Create a UI to collect amount, CVV, expiry date and PIN and to display user's Payment Method(s). Use the code below to load the Payment Method(s)\n\n```javascript\n    var loadWalletSuccess = function(response) {\n        alert(\"Wallet loaded successfully\");\n        var responseObject = JSON.parse(response);\n        // The responseObject here contains cardProduct, panLast4Digits and token, the token is used for making payment\n        // Load the cardProduct on a dropdown list and use the token in making payment with wallet \n        for(var i = 0; i < response.length; i++){\n            console.log(responseObject.paymentMethods[i].token);\n            console.log(responseObject.paymentMethods[i].panLast4Digits);\n            console.log(responseObject.paymentMethods[i].cardProduct);\n        }\n    }\n    var loadWalletFail = function(response) {\n        alert(response);\n    }\n    PaymentPlugin.loadWallet(null, loadWalletSuccess, loadWalletFail);  \n```\n\n* Create a Pay button\n* Set up payment request like this:\n\n```javascript\n    var walletRequest = {\n        pan:ADA4C1FFE6DE40C584ABD3CBAFDA0D08,  //Token from the wallet\n        amount : 100, // Amount in Naira\n        cvv : 111, // Card CVV\n        pin : 1111, // Optional Card PIN for card payment\n        currency : \"NGN\", // ISO Currency code\n        expiryDate : 2004, // Card or Token expiry date in YYMM format\n        requestorId : 1234567890,\n        customerId : 1234567890 // Optional email, mobile no, BVN etc to uniquely identify the customer.\n    }\n```\n\n* In the onclick event of the Pay button, use this code.\n\n```javascript\n    var payWithWalletSuccess = function(response) {\n        var responseObject = JSON.parse(response);\n        if(responseObject.otpTransactionIdentifier){\n          // handle OTP\n        } else {\n          alert(\"Payment success\\n\" + responseObject.message);\n        }\n    }\n    var payWithWalletFail = function(response) {\n        alert(response);\n    }\n    PaymentPlugin.payWithWalletSDK(walletRequest, payWithWalletSuccess, payWithWalletFail);    \n```\n\n\n### <a name='ValidateCardNoUI'></a> Validate Card and Get Token\n* To check if a card is valid and get a token\n* Create a UI to collect card details\n* Create a Validate/Add Card button\n* Set up validate card request using this code\n\n```javascript\n    var validateCardRequest = {\n        pan : 5060990580000217499,  //Token from the wallet\t\t\t\t\n        cvv : 111, // Card CVV\n        pin : 1111, // Optional Card PIN for card payment\n        expiryDate : 2004, // Card or Token expiry date in YYMM format\n        customerId : 1234567890 // Optional email, mobile no, BVN etc to uniquely identify the customer.\n    }\n```\n\n* In the onclick event of the Validate/Add Card button, use this code.\n\n```javascript\n    var validateCardSuccess = function(response) {\n        //var validateCardResponse = JSON.parse(response);  // transaction success response\n        // The response object contains fields transactionIdentifier, transactionRef,\n        // message, balance, token, tokenExpiryDate, panLast4Digits and cardType.         \n        if(response.responseCode) {\n                  if (response.responseCode === \"T0\") {\n                    ons.notification.prompt(response.message).then(\n                    function(otp) {\n                      response.method = \"validateCard\";\n                      response.otpValue = otp;\n                      authorizePurchase(response);\n                    }\n                  );\n                  }                 \n                } else {\n                  var responseObject = JSON.parse(response);\n                   if(responseObject.message !== undefined){\n                      alert(responseObject.message);\n                  }else{\n                    alert(response);\n                  }\n                }\n        // Save the token, tokenExpiryDate, cardType and panLast4Digits \n        // in order to pay with the token in the future.\n        alert(\"Card Validation was successful\");\n    } \n    var validateCardFail = function(response) {\n        alert(response);// transaction failure response\n    }\n    PaymentPlugin.validateCard(validateCardRequest, validateCardSuccess, validateCardFail);\n```\n\n## <a name='AuthorizeOTP'></a>Authorize Transaction With OTP\n\n* To authorize transaction with OTP\n* Create a UI to collect OTP\n* Create authorize otp button\n* Set up otp request using this code\n\n```javascript     \n    var authorizeRequest = {\n      otp : results.otpValue,  // Accept OTP from user\n      paymentId: results.paymentId, // Set the OTP identifier for the request\n      transactionRef: results.transactionRef, // Set the unique transaction reference.\n      authData: results.authData // Set request authData.\n    }\n```\n\n* In the onclick event of the authorize otp button, use this code.\n\n```javascript\n   var authorizeSuccess = function(response) {             \n     var responseObject = JSON.parse(response);\n     var theTransactionRef = responseObject.transactionRef;     \n     alert(theTransactionRef); // transaction success response\n   }\n    var authorizeFail = function(response) {      \n      alert(response);                                // transaction failure response\n    }   \n    if(results.method ===\"makePayment\"){\n      PaymentPlugin.authorizePurchase(authorizeRequest, authorizeSuccess, authorizeFail);        \n    }\n    else if (results.method ===\"validateCard\"){\n      PaymentPlugin.authorizeCard(authorizeRequest, authorizeSuccess, authorizeFail);  \n    }\n```\n\n### <a name='PaymentStatus'></a>Checking Payment Status\n* To check payment status\n* Create a UI to collect transaction identifier\n* Create payment status button\n* Set up payment status request using this code\n\n```javascript\n    var paymentStatusRequest = {\n        transactionRef : 117499114589, // The transaction unique reference.\n        amount : 100                   // The transaction amount\n    }\n```\n\n* To check the status of a payment made, use the code below\n\n```javascript\n    var paymentStatusSuccess = function(response) {\n        var responseObject = JSON.parse(response);\n        alert(responseObject.message);\n    }\n    var paymentStatusFail = function(response) {\n        alert(response);\n    }\n    PaymentPlugin.paymentStatus(paymentStatusRequest, paymentStatusSuccess, paymentStatusFail);\n```\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/techquest/cordova-payment-plugin.git"
  },
  "scripts": {
    "jshint": "node node_modules/jshint/bin/jshint www && node node_modules/jshint/bin/jshint src && node node_modules/jshint/bin/jshint tests",
    "test": "npm run jshint"
  },
  "version": "0.0.1"
}
